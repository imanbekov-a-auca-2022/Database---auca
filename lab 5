C:\Program Files\PostgreSQL\17\pgAdmin 4\runtime>"C:\Program Files\PostgreSQL\17\pgAdmin 4\runtime\psql.e
xe" "host=localhost port=5432 dbname=postgres user=postgres sslmode=prefer connect_timeout=10" 2>>&1
psql (17.6)
WARNING: Console code page (866) differs from Windows code page (1251)
         8-bit characters might not work correctly. See psql reference
         page "Notes for Windows users" for details.
Type "help" for help.

postgres=# \c labdb
You are now connected to database "labdb" as user "postgres".
labdb=# CREATE TABLE students (
labdb(#     student_id INTEGER PRIMARY KEY,
labdb(#     name VARCHAR(100),
labdb(#     email VARCHAR(150)
labdb(# );
ОШИБКА:  отношение "students" уже существует
labdb=# DROP TABLE IF EXISTS students;
DROP TABLE
labdb=# CREATE TABLE students (
labdb(#     student_id INTEGER PRIMARY KEY,
labdb(#     name VARCHAR(100),
labdb(#     email VARCHAR(150)
labdb(# );
CREATE TABLE
labdb=# CREATE TABLE students_table (
labdb(#     student_id INTEGER,
labdb(#     name VARCHAR(100),
labdb(#     email VARCHAR(150),
labdb(#     PRIMARY KEY (student_id)
labdb(# );
CREATE TABLE
labdb=# CREATE TABLE students_named (
labdb(#     student_id INTEGER,
labdb(#     name VARCHAR(100),
labdb(#     email VARCHAR(150),
labdb(#     CONSTRAINT pk_students PRIMARY KEY (student_id)
labdb(# );
CREATE TABLE
labdb=# ALTER TABLE students ADD CONSTRAINT pk_students PRIMARY KEY (student_id);
ОШИБКА:  таблица "students" не может иметь несколько первичных ключей
labdb=# CREATE TABLE students_single (
labdb(#     student_id SERIAL PRIMARY KEY,
labdb(#     name VARCHAR(100) NOT NULL,
labdb(#     email VARCHAR(150) UNIQUE,
labdb(#     faculty VARCHAR(50)
labdb(# );
CREATE TABLE
labdb=#
labdb=# INSERT INTO students_single (name, email, faculty) VALUES
labdb-# ('Alice Johnson', 'alice@alatoo.edu.kg', 'Computer Science'),
labdb-# ('Bob Smith', 'bob@alatoo.edu.kg', 'Mathematics'),
labdb-# ('Carol Davis', 'carol@alatoo.edu.kg', 'Computer Science');
INSERT 0 3
labdb=# SELECT * FROM students_single;
 student_id |     name      |        email        |     faculty
------------+---------------+---------------------+------------------
          1 | Alice Johnson | alice@alatoo.edu.kg | Computer Science
          2 | Bob Smith     | bob@alatoo.edu.kg   | Mathematics
          3 | Carol Davis   | carol@alatoo.edu.kg | Computer Science
(3 rows)


labdb=# CREATE TABLE course_enrollments (
labdb(#     student_id INTEGER,
labdb(#     course_id INTEGER,
labdb(#     semester VARCHAR(20),
labdb(#     enrollment_date DATE DEFAULT CURRENT_DATE,
labdb(#     grade CHAR(2),
labdb(#     PRIMARY KEY (student_id, course_id, semester)
labdb(# );
CREATE TABLE
labdb=#
labdb=# INSERT INTO course_enrollments (student_id, course_id, semester, grade) VALUES
labdb-# (1, 101, '2024-Spring', 'A'),
labdb-# (1, 102, '2024-Spring', 'B+'),
labdb-# (2, 101, '2024-Spring', 'A-'),
labdb-# (1, 101, '2024-Fall', 'A+'); -- допустимо, т.к. семестр другой
INSERT 0 4
labdb=# CREATE TABLE products (
labdb(#     product_id SERIAL PRIMARY KEY,
labdb(#     product_name VARCHAR(100) NOT NULL,
labdb(#     price DECIMAL(10,2)
labdb(# );
CREATE TABLE
labdb=# CREATE TABLE transactions (
labdb(#     transaction_id BIGSERIAL PRIMARY KEY,
labdb(#     amount DECIMAL(15,2),
labdb(#     transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
labdb(# );
CREATE TABLE
labdb=# -- GENERATED ALWAYS
labdb=# CREATE TABLE orders (
labdb(#     order_id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
labdb(#     customer_name VARCHAR(100),
labdb(#     order_date DATE DEFAULT CURRENT_DATE
labdb(# );
CREATE TABLE
labdb=#
labdb=# -- GENERATED BY DEFAULT
labdb=# CREATE TABLE customers (
labdb(#     customer_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
labdb(#     customer_name VARCHAR(100),
labdb(#     email VARCHAR(150)
labdb(# );
CREATE TABLE
labdb=#
labdb=# INSERT INTO customers (customer_id, customer_name, email)
labdb-# VALUES (1000, 'VIP Customer', 'vip@example.com'); -- можно задать вручную
INSERT 0 1
labdb=# CREATE TABLE departments (
labdb(#     dept_id INTEGER PRIMARY KEY,
labdb(#     dept_name VARCHAR(100)
labdb(# );
CREATE TABLE
labdb=#
labdb=# -- Вставим первую запись
labdb=# INSERT INTO departments VALUES (1, 'Computer Science');
INSERT 0 1
labdb=#
labdb=# -- Попробуем вставить дубликат (ошибка)
labdb=# INSERT INTO departments VALUES (1, 'Mathematics'); -- ERROR
ОШИБКА:  повторяющееся значение ключа нарушает ограничение уникальности "departments_pkey"
DETAIL:  Ключ "(dept_id)=(1)" уже существует.
labdb=#
labdb=# -- Попробуем вставить NULL (ошибка)
labdb=# INSERT INTO departments VALUES (NULL, 'Physics'); -- ERROR
ОШИБКА:  значение NULL в столбце "dept_id" отношения "departments" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (null, Physics).
labdb=#
